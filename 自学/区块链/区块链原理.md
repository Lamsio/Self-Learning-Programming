#### 简介
区块链是一个不断增长的全网总帐本，每个节点都拥有完整的区块链，并且节点总信任最长的区块链，尝试伪造区块链将需耗费全网51%总算力，因此个人或某组织是不可能实现这种行为的。

区块链是由一个个区块构成的有序链表组成，每个区块都记录了一系列的交易，并且每个区块都指向前一个区块，从而实现链条

![blockchain](https://www.liaoxuefeng.com/files/attachments/1312023350607937/l)

仔细观察每个区块会发现，每个区块都有唯一的哈希标识，他们被称为区块哈希，同时，区块通过记录上一个区块的哈希值来指向上一个区块。

![block](https://www.liaoxuefeng.com/files/attachments/1312023377870913/l)

每个区块还有一个Merkle哈希用来确保该区块的所有交易记录无法被篡改。

每个区块的主要数据则是交易数据，第一条是Coinbase，也就是矿工的挖矿奖励，后续交易则是用户交易，为确保不可篡改性，因此，区块使用哈希算法进行加密。通常是SHA-256以及RipeMD160。

#### 哈希算法
哈希算法，即将未知长度数据转换为固定长度数据的加密方式，此加密方式往往不可逆，因此诞生了`哈希碰撞`一词。

常见的哈希算法有: `MD5`, `SHA-1`, `SHA-256`, `SHA-512`, `RipeMD160`.

#### 哈希碰撞
哈希碰撞，我们知道哈希算法是不可逆的，因为有极小几率会发生`不同的源数据，产生相同的加密结果`的情况，这种情况被称为哈希碰撞。

#### Merkle Hash
Merkle Hash是区块头的一部分，用于记录加密后的交易记录。

![merkle](https://www.liaoxuefeng.com/files/attachments/1312022436249666/l)

假设一个区块有4笔交易，`a`,`b`,`c`,`d`。

我们先分别将这四笔交易进行哈希加密，然后将其两两分组相加，直至最后仅剩下一个哈希值，这个哈希值就是Merkle Hash。
```ascii
       ┌───────────────┐               ┌───────────────┐
       │b1=dhash(a1+a2)│               │b2=dhash(a3+a4)│
       └───────────────┘               └───────────────┘
               ▲                               ▲
       ┌───────┴───────┐               ┌───────┴───────┐
       │               │               │               │
┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│a1=dhash(tx1)│ │a2=dhash(tx2)│ │a3=dhash(tx3)│ │a4=dhash(tx4)│
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘
```



```ascii
                     ┌───────────────────┐
                     │merkle=dhash(b1+b2)│
                     └───────────────────┘
                               ▲
               ┌───────────────┴───────────────┐
               │                               │
       ┌───────────────┐               ┌───────────────┐
       │b1=dhash(a1+a2)│               │b2=dhash(a3+a4)│
       └───────────────┘               └───────────────┘
               ▲                               ▲
       ┌───────┴───────┐               ┌───────┴───────┐
       │               │               │               │
┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│a1=dhash(tx1)│ │a2=dhash(tx2)│ │a3=dhash(tx3)│ │a4=dhash(tx4)│
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘
```