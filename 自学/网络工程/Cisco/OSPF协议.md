## OSPF协议
OSPF协议是一款开放式协议，相比于RIP和EIGRP仅限思科使用，OSPF协议允许其他厂商使用

OSPF采用SPF算法计算到达目的地的最短路径
- 什么叫链路（LINK）？=> 路由器接口
- 什么叫状态（STATE）？=> 描述接口以及其他邻居路由之间的关系

#### OSPF metric
每个路由都把自己当作根路由，并给予累计成本（cost值）来计算到达目的地的最短路径

COST = 参考宽带(10^8) / 接口带宽(b/s)
![[Pasted image 20220601132152.png]]

#### OSPF报文
![[Pasted image 20220601132906.png]]
LSDB: LSDB 是对整个网络拓扑结构和网段信息的汇总，同步完 LSDB 后，所有路由器对网络的认识是一样的
LSA: 使用 **LSA**（ Link State Advertisement ，链路状态通告）来装载和传输链路状态信息。LSA 需要描述邻接路由器信息、直连链路信息、跨区域信息等，所以定义了多种类型的 LSA 。
#### OSPF区域
![[Pasted image 20220601133936.png]]
由于每台路由器都包含了整个区域的详细信息，随着网络规模变大，会给路由器带来不少的负荷，因此我们需要进行划区操作，而有一台特殊路由器用于连接两个不同区域的网络

LSA泛洪：即区域内某路由器线路瘫痪会波动到整个区域所有路由器。
#### OSPF的三张表
![[Pasted image 20220601133535.png]]

#### OSPF的基本运行步骤
![[Pasted image 20220601135204.png]]
![[Pasted image 20220601135301.png]]


#### OSPF网络类型
![[Pasted image 20220601135501.png]]
根据数据链路层的封装，来判断处于OSPF哪一种网络类型当中

#### LSA泛洪
在与其他路由器通信前，需要建立路由关系。在BMA网络类型中，该损耗尤为明显，一台路由器需要与n-1台路由器进行通信、交换路由信息。
当某台路由器中断时，也必须向其他所有路由器发送信息告知，因此在MA网络类型中，我们提出了新的概念 —— DR 和 BDR

###### DR
指定路由器，即选择

###### BDR
备份指定路由器